# üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º MikroKredit

MikroKredit –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ systemd service –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫
```bash
sudo systemctl start mikrokredit
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
sudo systemctl stop mikrokredit
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
sudo systemctl restart mikrokredit
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
sudo systemctl status mikrokredit
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
sudo journalctl -u mikrokredit -n 50

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u mikrokredit -f

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f logs/access.log
tail -f logs/error.log
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —É–∂–µ **–≤–∫–ª—é—á—ë–Ω**. –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã.

```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl disable mikrokredit

# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable mikrokredit
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ systemd service

- ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ `systemctl`
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ `journalctl`
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (PrivateTmp, NoNewPrivileges)
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ —Å–∫—Ä–∏–ø—Ç–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–≤

–°—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (`start_service.sh`, `stop_service.sh`) **—É–¥–∞–ª–µ–Ω—ã**.  
–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ `systemctl`.

## üìä Health Check

```bash
curl http://127.0.0.1:8002/healthz
# –û—Ç–≤–µ—Ç: {"status":"ok"}
```

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Service file**: `/etc/systemd/system/mikrokredit.service`
- **Gunicorn config**: `/home/valstan/mikrokredit/gunicorn.conf.py`
- **–õ–æ–≥–∏**: `/home/valstan/mikrokredit/logs/`
- **PID file**: `/home/valstan/mikrokredit/mikrokredit.pid`
- **–ü–æ—Ä—Ç**: `8002`
- **–í–æ—Ä–∫–µ—Ä—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (CPU * 2 + 1)

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

```bash
# –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
sudo systemctl status mikrokredit
sudo journalctl -u mikrokredit -n 100

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
sudo systemctl status postgresql

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
sudo systemctl status redis-server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
ss -tlnp | grep 8002

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep gunicorn
```

## üìù –ü—Ä–∏–º–µ—Ä—ã

```bash
# –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
sudo systemctl restart mikrokredit

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
curl http://127.0.0.1:8002/healthz

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u mikrokredit -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫
tail -100 logs/error.log
```

---

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**: 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

