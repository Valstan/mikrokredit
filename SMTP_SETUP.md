# üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ø–æ—á—Ç—ã

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ—á—Ç—ã
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://passport.yandex.ru/profile
2. –†–∞–∑–¥–µ–ª "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" ‚Üí "–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è "–ü–æ—á—Ç–∞"
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å** –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –æ—Ç –ø–æ—á—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —è—â–∏–∫ –Ω–∞ https://mail.yandex.ru
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `mikrokredit-noreply@yandex.ru`
2. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å –æ—Ç —ç—Ç–æ–≥–æ —è—â–∏–∫–∞

---

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
cd /home/valstan/mikrokredit
./setup_smtp.sh
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç:
- **Email –∞–¥—Ä–µ—Å**: –≤–∞—à –∞–¥—Ä–µ—Å –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, mikrokredit@yandex.ru)
- **–ü–∞—Ä–æ–ª—å**: –ø–∞—Ä–æ–ª—å –æ—Ç –ø–æ—á—Ç—ã –∏–ª–∏ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è**: –ú–∏–∫—Ä–æ–ö—Ä–µ–¥–∏—Ç (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)

---

## –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É:

```bash
cd /home/valstan/mikrokredit
.venv/bin/python test_smtp.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ.

---

## –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl restart mikrokredit.service
```

---

## üîß –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.smtp`:

```bash
nano /home/valstan/mikrokredit/.env.smtp
```

–î–æ–±–∞–≤—å—Ç–µ:

```env
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=587
SMTP_USER=–≤–∞—à-email@yandex.ru
SMTP_PASSWORD=–≤–∞—à-–ø–∞—Ä–æ–ª—å
EMAIL_FROM=–≤–∞—à-email@yandex.ru
EMAIL_NAME=–ú–∏–∫—Ä–æ–ö—Ä–µ–¥–∏—Ç
SITE_URL=http://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞:

```bash
chmod 600 /home/valstan/mikrokredit/.env.smtp
```

---

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ø–Ω–¥–µ–∫—Å SMTP

- **–°–µ—Ä–≤–µ—Ä**: smtp.yandex.ru
- **–ü–æ—Ä—Ç**: 587 (STARTTLS)
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: STARTTLS
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –î–∞

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å email –∏ –ø–∞—Ä–æ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –Ø–Ω–¥–µ–∫—Å–µ –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### "Timeout –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ smtp.yandex.ru:587
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw status`

### "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç SSL"
- –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã: `sudo update-ca-certificates`

---

## üéâ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–º–æ–∂–µ—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ email
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –§–∞–π–ª `.env.smtp` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ `600` (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å)
- –ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ git (—Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π

